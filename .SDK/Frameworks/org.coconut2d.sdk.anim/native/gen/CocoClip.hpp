/* Generated by Coconut2D C++ Compiler from file CocoClip.jspp */

#ifndef __COCOCLIP_HPP__
#define __COCOCLIP_HPP__

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#include "Coconut2D.hpp"
#include "CocoEventSource.hpp"
#include "IEventTarget.hpp"
#include "CocoScene.hpp"
#include "Constants.hpp"
#include "ICocoRenderContext.hpp"
#include "CocoMatrix.hpp"
#include "CocoTimeline.hpp"
#include "CocoImage.hpp"
#include "CocoGraphics.hpp"
#include "CocoAudio.hpp"

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Event CocoClip::OnTouchEnd
class CocoClipOnTouchEndEvent : public CocoEvent
{
public:

	float x;
	float y;
	CocoClipOnTouchEndEvent() : CocoEvent("OnTouchEnd", true, true)
	{
		x = 0.0;
		y = 0.0;
	}
};

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Event CocoClip::OnTouchMove
class CocoClipOnTouchMoveEvent : public CocoEvent
{
public:

	float x;
	float y;
	CocoClipOnTouchMoveEvent() : CocoEvent("OnTouchMove", true, true)
	{
		x = 0.0;
		y = 0.0;
	}
};

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Event CocoClip::OnTouchStart
class CocoClipOnTouchStartEvent : public CocoEvent
{
public:

	float x;
	float y;
	CocoClipOnTouchStartEvent() : CocoEvent("OnTouchStart", true, true)
	{
		x = 0.0;
		y = 0.0;
	}
};

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Event CocoClip::OnClick
class CocoClipOnClickEvent : public CocoEvent
{
public:
	CocoClipOnClickEvent() : CocoEvent("OnClick", true, true)
	{
	}
};

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

class CocoClip : public CocoEventSource, public IEventTarget
{
public:
	String __instanceName;
	String __clipPath;
	CocoScene* __scene;
	CocoImage* __image;
	COCO_CLIP_SYMBOL_LOOP_ENUM __symbolLoop;
	Array<CocoClip*>* __children;
	CocoTimeline* __timeline;
	CocoClip* __parent;
	String text;
	String textFontName;
	int textFontSize;
	COCO_TEXT_ALIGN_ENUM textHAlign;
	COCO_TEXT_ALIGN_ENUM textVAlign;
	bool textMultiline;
	COCO_TEXT_TRIMMING_ENUM textTrimming;
	String textColor;
	int textWidth;
	int textHeight;
	float __currentTime;
	float __loopTime;
	int __loops;
	CocoKeyFrame* __currentFrame;
	CocoClip* __childWithMaxTimelineDuration;
	bool __hasBoundingBox;
	CocoVector* __vABS_TOP_LEFT;
	CocoVector* __vABS_TOP_RIGHT;
	CocoVector* __vABS_BOTTOM_LEFT;
	CocoVector* __vABS_BOTTOM_RIGHT;
	CocoVector* __vREL_TOP_LEFT;
	CocoVector* __vREL_TOP_RIGHT;
	CocoVector* __vREL_BOTTOM_LEFT;
	CocoVector* __vREL_BOTTOM_RIGHT;
	CocoVector* __vBBoxVrtx;
	CocoMatrix* __mBBox;
	float __touch_start_time;
	CocoPoint* __touch_start_point;
	bool __touch_moved;
	CocoSequence* __currentSequence;
	CocoAudio* __currentAudio;
	CocoClipOnClickEvent* OnClick; // Event
	CocoClipOnTouchStartEvent* OnTouchStart; // Event
	CocoClipOnTouchMoveEvent* OnTouchMove; // Event
	CocoClipOnTouchEndEvent* OnTouchEnd; // Event
	const String __className = String("CocoClip");
	CocoClip(CocoImage* image = nullptr);
	virtual ~CocoClip();
	void prepare(CocoScene* scene);
	void setText(String text);
	void setText(String text, String fontName, int fontSizePixels, COCO_TEXT_ALIGN_ENUM hAlign, COCO_TEXT_ALIGN_ENUM vAlign, bool multiline, COCO_TEXT_TRIMMING_ENUM trimming, String CSSColor, int textRectWidth, int textRectHeight);
	void reset();
	void clear();
	virtual CocoClip* addChild(CocoClip* clipInstance);
	CocoClip* removeChild(CocoClip* clipInstance);
	void normalize();
	CocoClip* getChildByName(String instanceName);
	int getChildIndex(CocoClip* child);
	bool gotoFrameByName(String LabelName, bool pause = false);
	bool gotoFrameByIndex(int FrameIndex, bool pause = false);
	void __advanceTime(float parentClipsDuration);
	virtual void paint(ICocoRenderContext* ctx, CocoScene* scene, CocoClip* parentClip, bool calcBoundingBox, int level);
	void combine(CocoKeyFrame* F1, CocoKeyFrame* F2);
	void apply(CocoKeyFrame* F, CocoMatrix* matrix);
	bool hitTest(float wx, float wy);
	void initBoundingBoxFromTexture(CocoScene* scene, CocoMatrix* mv, float W2, float H2, float __pixelRatioScale);
	void initBoundingBoxFromChildren(CocoScene* scene, CocoMatrix* mv);
};

#endif // __COCOCLIP_HPP__
